# sudo is enabled because it provides more memory which was needed to run go test -race
sudo: required
dist: trusty
language: go
os:
  - windows
  - linux
  - osx

go:
  - 1.10.x
  - 1.11.x

go_import_path: github.com/prometheus/tsdb

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install make; fi
  
install:
  - go get -v -t ./...

script:
  # `staticcheck` target is omitted due to linting errors
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then make test; else make check_license style unused test; fi
